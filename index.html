<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TO Do List</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<style>
body{
    background-color: rgb(148, 7, 30);
    font-family: "Merriweather", none serif;
    font-weight: 400;
    font-style: normal;
 }
.task{
    display: flex;
    background-color: white;
    padding: 4px;
    border-bottom: solid black 1px;
    transition: box-shadow 0.2s;
}

.done{
    background-color: rgb(158, 253, 160);
}

.task:hover {
    box-shadow: 0px 3px 15px  rgba(97, 97, 97, 0.843);
}

.tasks-table {
    background: rgb(239, 239, 239);
    width: 60%;
    margin-top: 130px;
}



button{
    border: none;
    font-size: 20px;
    box-shadow: 0px 3px 5px rgba(168, 168, 168, 0.38);
    line-height: 0;  /*  The line-height CSS property sets the height of a line box. */
}

.btn-circuler{
     width: 40px;
     height: 40px;
     border-radius: 50%;
   
}

</style>

<body>
    <div style="direction: rtl;"> <!-- rtl. Text direction goes from right-to-left .-->
        <!-- CENTRE DIV -->
        <div style="display:flex; justify-content: center; align-items: center;">
          
            <!-- TASKS TABLE-->
            <div class="tasks-table">
                  <!-- HEADER-->

                  <div style = "width: 100%; text-align: center; background-color:orangered; color:white; padding-top: 8px; padding-bottom: 8px;">
                       <h1 style="display: inline;">MY To DO list</h1>
        <!-- The float CSS property places an element on the left or right side of its container, allowing text and inline elements to wrap around it -->
                       <button id="add-btn" class="btn-circuler" style="float: right; background: white; margin-right: 10px ;">
                            <span class="material-symbols-outlined">
                               add
                            </span>
                       </button>
                  </div>
                      <!-- // HEADER // -->
                     <div id="tasks" style ="padding:20px;">
                       <!-- TASK-->
                  <div class="task">
                    

                      <!-- TASKS INFO -->

                      <div style="width:70%;">
                         <h2> reading a book</h2>
                         <div>
                            <span class="material-symbols-outlined">
                                calendar_month
                            </span>
                            <span>
                                29/03/2024
                            </span>
                         </div>
                      </div>

                       <!-- TASKS INFO -->

                        <!-- TASKS ACTIONS -->
                        <div style="display: flex; justify-content:space-between; align-items: center; width: 20%; color:white">

                            <button class="btn-circuler" style="background-color: red; color:white">
                                <span class="material-symbols-outlined">
                                    Delete
                                </span>
                            </button>
                            
                            <button class="btn-circuler" style="background-color: green; color:white">
                                <span class="material-symbols-outlined">
                                    Done
                                </span>
                            </button>
                            
                            <button class="btn-circuler" style="background-color: blue; color:white">
                                <span class="material-symbols-outlined">
                                    Edit
                                </span>
                            </button> 
                        </div>
                        
                         <!-- TASKS  -->
                  </div>
                  <!-- Duplicate the task reading a book  -->
                  <div class="task">
                    

                      <!-- TASKS INFO -->

                      <div style="width:70%;">
                         <h2> reading a book</h2>
                         <div>
                            <span class="material-symbols-outlined">
                                calendar_month
                            </span>
                            <span>
                                29/03/2024
                            </span>
                         </div>
                      </div>

                       <!-- TASKS INFO -->

                        <!-- TASKS ACTIONS -->
                        <div style="display: flex; justify-content:space-between; align-items: center; width: 20%; color:white">

                            <button class="btn-circuler" style="background-color: red; color:white">
                                <span class="material-symbols-outlined">
                                    Delete
                                </span>
                            </button>
                            
                            <button class="btn-circuler" style="background-color: green; color:white">
                                <span class="material-symbols-outlined">
                                    Done
                                </span>
                            </button>
                            
                            <button class="btn-circuler" style="background-color: blue; color:white">
                                <span class="material-symbols-outlined">
                                    Edit
                                </span>
                            </button> 
                        </div>
                        
                         <!-- TASKS  -->
                  </div>

                  <!-- Duplicate the task reading a book -->
                  <div class="task">
                    

                      <!-- TASKS INFO -->

                      <div style="width:70%;">
                         <h2> reading a book</h2>
                         <div>
                            <span class="material-symbols-outlined">
                                calendar_month
                            </span>
                            <span>
                                29/03/2024
                            </span>
                         </div>
                      </div>

                       <!-- TASKS INFO -->

                        <!-- TASKS ACTIONS -->
                        <div style="display: flex; justify-content:space-between; align-items: center; width: 20%; color:white">

                            <button class="btn-circuler" style="background-color: red; color:white">
                                <span class="material-symbols-outlined">
                                    Delete
                                </span>
                            </button>
                            
                            <button class="btn-circuler" style="background-color: green; color:white">
                                <span class="material-symbols-outlined">
                                    Done
                                </span>
                            </button>
                            
                            <button class="btn-circuler" style="background-color: blue; color:white">
                                <span class="material-symbols-outlined">
                                    Edit
                                </span>
                            </button> 
                        </div>         
                        
                         <!-- TASKS  -->
                  </div>

                  <!-- Duplicate the task reading a book -->
         <div class="task">
                        <!-- TASKS INFO -->
               <div style="width:70%;">
                   <h2>reading a book</h2>
                 <div>
                     <span class="material-symbols-outlined">calendar_month</span>
                     <span>29/03/2024</span>
                 </div>
        </div>
                    <!-- TASKS INFO -->

                    <!-- TASKS ACTIONS -->
            <div style="display: flex; justify-content:space-between; align-items: center; width: 20%; color:white">
                  <button class="btn-circuler" style="background-color: red; color:white">
                       <span class="material-symbols-outlined">Delete</span>
                  </button>
                  <button class="btn-circuler" style="background-color: green; color:white">
                       <span class="material-symbols-outlined">Done</span>
                   </button>
                 <button class="btn-circuler" style="background-color: blue; color:white">
                        <span class="material-symbols-outlined">Edit</span>
                 </button> 
            </div>
    </div>
</body>


<script> 

let tasks = [
    {
        'title': 'reading a book',
        'date': '12/03/2024',
        'isDone':true
    },

    {
        'title': 'code',
        'date': '12/03/2024',
        'isDone':false
    },

    {
        'title': 'coloring',
        'date': '12/03/2024',
        'isDone':false
    },

    {
        'title': 'have a fun',
        'date': '12/03/2024',
        'isDone':false
    },
    
    {
        'title': 'family time',
        'date': '31/03/2024',
        'isDone':true,
    }   
]
    // i need to write JSON.parse()st the tasks go back from a string to an array
function getTasksFromStorage(){   
    //tasks=JSON.parse(localStorage.getItem("tasks"))
   let retrievedTasks = JSON.parse(localStorage.getItem("tasks"))
/* 
   if(retrievedTasks == null){
    tasks = []
   }else{
     tasks = retrievedTasks
   } */
    // i can write this insted 
    tasks = retrievedTasks ??  []
}
  getTasksFromStorage()


                  // FILL THE TASK

function fillTaskOnThePage(){

   document.getElementById("tasks").innerHTML= " "
       
    let index = 0
     for (task of tasks){

    let content = 

    ` 
    <div class="task ${task.isDone ? "done": ""} "> 
                    
                <!-- TASKS INFO -->

        <div style="width:70%;">
             <h2>${task.title}</h2>
        <div>
             <span class="material-symbols-outlined">
                calendar_month
             </span>
             <span>
                ${task.date}
             </span>
        </div>
        </div>
                <!-- TASKS INFO -->

                <!-- TASKS ACTIONS -->

        <div style="display: flex; justify-content:space-between; align-items: center; width: 20%; color:white">

            <button onclick = "deleteTask(${index})"  class="btn-circuler" style="background-color: red; color:white">
                <span class="material-symbols-outlined">
                    Delete
                </span>
            </button>
                          

        ${task.isDone ? `
            <button onclick = " toggleTaskCompletion(${index})" class="btn-circuler" style="background-color: purple; color:white">
                <span class="material-symbols-outlined">
                    Cancel
                </span>
            </button>
             `:`
            <button onclick = " toggleTaskCompletion(${index})" class="btn-circuler" style="background-color: green; color:white">
                <span class="material-symbols-outlined">
                    Done
                </span>
            </button>
                         ` }

            <button onclick = "editTask(${index})"  class="btn-circuler" style="background-color: blue; color:white">
                <span class="material-symbols-outlined">
                    Edit
                </span>
            </button> 
        </div>
                      
         <!-- TASKS  -->
    </div>
     `
          /*   let name = localStorage.getItem("name")
            alert(name) */
     
             document.getElementById("tasks").innerHTML +=  content
             index ++ 
    }
}
        fillTaskOnThePage ()  

             document.getElementById("add-btn").addEventListener("click", function(){
               // when i use class from variable which is an object i need to write new 
                let currentDate = new Date()
                // i had to write +1 in month so the result give me the current month not the month before,
                // and i put it in () so it add in month only not doing the math addition to all string
                                                                                                                      // this part for adding hours and minutes
                let date = currentDate.getDate() + "/" +(currentDate.getMonth()+1) + "/" + currentDate.getFullYear()  +  " ( " + currentDate.getMinutes() + " : " +  currentDate.getHours() + " ) "           
                
                // console.log(Date()) 
                //  a prompt is a built-in function that displays a dialog box with a message and allows the user to input data.  
                let taskName = prompt("Please Entre The Task Title")
               //  console.log(taskName)
              
                let taskObject = {
                    "title": taskName,
                    "date": date,
                    "isDone": false
                } 

               tasks.push(taskObject)
                
                storageTasks()

                fillTaskOnThePage()
             
             }) 
                          // DELETE A TASK
             function deleteTask(index){
                let task = tasks[index]
                console.log(task)
                let isConfirmed = confirm("Are You Sure of Deleting : " + task.title )
              

               if(isConfirmed){
                tasks.splice(index,1)
                storageTasks()
                fillTaskOnThePage()
               }
              
             }

             function editTask(index){
                let task = tasks[index]
                let newTaskTitle= prompt("Please Entre The New Task", task.title)
               
                task.title=newTaskTitle
                storageTasks()
                fillTaskOnThePage()
             }
            // Toggle buttons are interactive components that allow users to switch between two states, such as on/off or true/false
             function toggleTaskCompletion(index){
                let task = tasks[index]
               /* 
                if(task.isDone){
                    task.isDone = false
                }else{
                    task.isDone = true
                } */ 
                task.isDone =! task.isDone
                storageTasks()
                fillTaskOnThePage()
             }

                       // STOREGE FUNCTION

             function storageTasks(){
                let tasksString =JSON.stringify(tasks)
                      // console.log(tasksString)

                      //localStorage.setItem("tasks", tasks)
                localStorage.setItem("tasks", tasksString)
                }
</script>
</html>